(this["webpackJsonpcoalition-game"]=this["webpackJsonpcoalition-game"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/game_class.b52faa08.png"},17:function(e,t,a){e.exports=a(31)},22:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c);a(22),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,s=a(3),i=a(12);!function(e){e.P1="P1",e.P2="P2",e.P3="P3"}(l||(l={}));var u,E=[l.P1,l.P2,l.P3],f={screen:"INTRO",coalitionsValues:{12:0,13:0,23:0,123:0},players:[l.P1,l.P2,l.P3],currentTurn:l.P1,coalitionForOffer:"23",offers:[],reason:"OFFER_ACCEPTED",states:[]},m=a(13),p=a(2),P=a(1);!function(e){e.START_GAME="START_GAME",e.CONFIGURE_GAME="CONFIGURE_GAME",e.RESTART_GAME="RESTART_GAME",e.SELECT_COALITION="SELECT_COALITION",e.SUBMIT_OFFER="SUBMIT_OFFER",e.RESPOND_OFFER="RESPOND_OFFER",e.UNDO="UNDO",e.BACK="BACK",e.GIVE_UP="GIVE_UP"}(u||(u={}));var d={12:[l.P1,l.P2],13:[l.P1,l.P3],23:[l.P2,l.P3],123:[l.P1,l.P2,l.P3]},O=function(e){switch(e){case l.P1:return"P1";case l.P2:return"P2";case l.P3:return"P3"}},C=function(e){return d[e]},N=function(e){return v(e[l.P1])&&v(e[l.P2])&&v(e[l.P3])},v=function(e){return-1!==["PROPOSED","ACCEPTED","REJECTED","NON_RELEVANT"].indexOf(e)},_=function(e){var t=function(e){return-1!==["PROPOSED","ACCEPTED","NON_RELEVANT"].indexOf(e)};return t(e[l.P1])&&t(e[l.P2])&&t(e[l.P3])},b=function(e){return N(e)&&!_(e)},T=function(e){switch(e){case"123":case"23":return l.P1;case"13":return l.P2;case"12":return l.P3}},h=function(e){return e.slice().reverse().find(_)},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.START_GAME:return Object(P.a)({},e,{screen:"SELECT_COAL",coalitionsValues:t.payload.gameCoalitionsValues,offers:[t.payload.offer],states:[].concat(Object(p.a)(e.states),[g(e)])});case u.RESTART_GAME:return Object(P.a)({},e,{screen:"INTRO"});case u.SELECT_COALITION:return Object(P.a)({},e,{screen:"OFFER",coalitionForOffer:t.payload.selectedCoalition,states:[].concat(Object(p.a)(e.states),[g(e)])});case u.SUBMIT_OFFER:var a=t.payload,n=a.actor,r=a.selectedCoalition,c=a.split,o=C(r),l={actor:n,selectedCoalition:r,split:c,P1:"NON_RELEVANT",P2:"NON_RELEVANT",P3:"NON_RELEVANT"};return o.forEach((function(e){return l[e]="TBD"})),l[n]="PROPOSED",Object(P.a)({},e,{screen:"ACK",offers:[].concat(Object(p.a)(e.offers),[l]),states:[].concat(Object(p.a)(e.states),[g(e)])});case u.RESPOND_OFFER:var s=t.payload,i=s.actor,E=s.status,m=Object(P.a)({},e.offers.pop());if("ACCEPT"===E&&(m[i]="ACCEPTED"),"REJECT"===E&&(m[i]="REJECTED"),!N(m))return Object(P.a)({},e,{offers:[].concat(Object(p.a)(e.offers),[m]),states:[].concat(Object(p.a)(e.states),[g(e)])});if(b(m))return Object(P.a)({},e,{offers:[].concat(Object(p.a)(e.offers),[m]),reason:"OFFER_REJECTED",screen:"SELECT_COAL",states:[].concat(Object(p.a)(e.states),[g(e)])});if(_(m)){var d="SELECT_COAL";return"123"===m.selectedCoalition&&(d="FINISHED"),Object(P.a)({},e,{offers:[].concat(Object(p.a)(e.offers),[m]),reason:"OFFER_ACCEPTED",screen:d,currentTurn:T(m.selectedCoalition),states:[].concat(Object(p.a)(e.states),[g(e)])})}throw"Should not happen";case u.UNDO:if(e.states){var O=e.states[e.states.length-1];return Object(P.a)({},O,{states:e.states.slice(0,-1)})}return Object(P.a)({},e);case u.GIVE_UP:return Object(P.a)({},e,{states:[].concat(Object(p.a)(e.states),[g(e)]),screen:"FINISHED"});default:return Object(P.a)({},e)}},g=function(e){var t=Object(P.a)({},e);return t.states=[],t},S=function(){return function(e){var t=e.getState;return function(e){return function(a){console.groupCollapsed("dispatching action => ".concat(a.type)),console.log("will dispatch",a);var n=e(a);return console.log("state after dispatch",t()),console.groupEnd(),n}}}},y=a(7),A=(a(29),a(30),function(e){return r.a.createElement("div",{className:"root_topbar"},r.a.createElement("span",{className:"root_topbar_title"},"The Coalition Parachute game"),r.a.createElement("span",null,r.a.createElement("button",{className:"root_topbar_button",onClick:e.onUndo},"Undo"),"INTRO"===e.screen&&r.a.createElement("button",{className:"root_topbar_button",onClick:e.onStartGame},"Start Game"),"INTRO"!==e.screen&&r.a.createElement("button",{className:"root_topbar_button",onClick:e.onIntroClick},"Restart")))}),I=a(15),F=a.n(I),j=function(e){return r.a.createElement("div",{className:"intro_root"},r.a.createElement("p",null,"This game is going to simulate the parachute game we did in class, playing in turns, On each turn a player \n    will have the chance to make an offer to the other participants to join him, create a coalition, and share the \n    point of the coalition they have created."),r.a.createElement("p",null,"Pay attention that the point of the coalition you create are not split evenly and try to get the best value \n      you can in the current game set"),r.a.createElement("p",null,"Good luck"),r.a.createElement("img",{className:"intro_img",src:F.a,alt:"parachute"}))},D=function(e){var t=e.className,a=e.children;return r.a.createElement("div",{className:t},a)},w=function(e){var t=e.coalitionsValues,a=e.players;return r.a.createElement("div",{className:"par_root"},r.a.createElement("div",{className:"par_top"},r.a.createElement(k,null,t[13])),r.a.createElement("div",{className:"par_second"},r.a.createElement(k,null,t[12]),r.a.createElement(k,null,t[23])),r.a.createElement("div",{className:"par_row_of_players"},r.a.createElement(G,null,a[0]),r.a.createElement(G,null,a[1]),r.a.createElement(G,null,a[2])),r.a.createElement("div",{className:"par_bottom"},r.a.createElement(k,null,t[123])))},k=function(e){return r.a.createElement("button",{className:"value_button"},e.children)},G=function(e){return r.a.createElement("button",{className:"player_button"},e.children)},L=function(e){return r.a.createElement("div",{className:"coal_select_root"},r.a.createElement(w,e),r.a.createElement("div",null,"Its ".concat(O(e.currentTurn),"'s Turn to make an offer:")),r.a.createElement(M,{latestAcceptedOffer:h(e.offers)}),r.a.createElement(V,e))},V=function(e){var t=e.coalitionsValues,a=e.currentTurn,n=e.onGiveUp,c=function(e){switch(e){case l.P1:return["12","13","123"];case l.P2:return["12","23","123"];case l.P3:return["13","23","123"]}}(a);return r.a.createElement("div",{className:"coal_selections"},c.map((function(a,n){return r.a.createElement(U,{key:n,coalitionsValues:t,coalitionId:a,onCoalitionSelect:e.onCoalitionSelect})})),r.a.createElement("div",{className:"give_up_root"},r.a.createElement("p",null,"Can't offer anything better."),r.a.createElement("button",{onClick:n,className:"give_up_btn"},"Give up")))},U=function(e){var t=e.coalitionId,a=e.coalitionsValues,n=e.onCoalitionSelect,c=function(e){switch(e){case"12":return"Coalition of ".concat(O(l.P1)," and ").concat(O(l.P2));case"13":return"Coalition of ".concat(O(l.P1)," and ").concat(O(l.P3));case"23":return"Coalition of ".concat(O(l.P2)," and ").concat(O(l.P3));case"123":return"Coalition of ".concat(O(l.P1),", ").concat(O(l.P2)," and ").concat(O(l.P3))}}(e.coalitionId);return r.a.createElement("div",{className:"single_coal_selection"},r.a.createElement("p",null,"".concat(c)),r.a.createElement("p",null,"value: ".concat(a[t])),r.a.createElement("button",{onClick:function(){return n(t)}},"Select"))},M=function(e){var t=e.latestAcceptedOffer;return r.a.createElement("div",{className:"aggr"},r.a.createElement("p",null,"If nobody will accept any offers, The split will be As follows:",r.a.createElement("br",null),[l.P1,l.P2,l.P3].map((function(e,a){return r.a.createElement("span",{key:a,className:"aggr_split"},"".concat(e," will get:"),r.a.createElement("span",{className:"value"},"".concat(t.split[e])))}))))},J=a(16),B=function(e){var t=e.coalitionForOffer,a=e.coalitionsValues,c=e.onOfferSubmit,o=e.currentTurn,l=(e.offers,Object(n.useState)({P1:0,P2:0,P3:0})),s=Object(J.a)(l,2),i=s[0],u=s[1],E=C(t),f=function(e){return function(t){var a=Object(P.a)({},i);a[e]=t>=0?t:0,u(a)}};return r.a.createElement("div",{className:"offer_form_root"},r.a.createElement(w,e),r.a.createElement("form",{className:"offer_form",onSubmit:function(e){e.preventDefault(),c(i,t,o)}},E.map((function(e){return r.a.createElement(x,{value:i[e],player:e,onChange:f(e)})})),r.a.createElement("p",null,"Total input: ".concat(i.P1+i.P2+i.P3,", Expected input: ").concat(a[t])),r.a.createElement("input",{type:"submit",value:"Submit",disabled:i.P1+i.P2+i.P3!==a[t]})))},x=function(e){var t=e.player,a=e.value,n=e.onChange;return r.a.createElement("div",{className:"offer_input"},r.a.createElement("label",null,t," will get:"),r.a.createElement("input",{type:"number",value:a,onChange:function(e){return n(parseInt(e.target.value)||0)}}))},K=function(e){var t=e.onOfferRespond,a=e.offers[e.offers.length-1],n=function(e){return function(a){t(e,a),console.log("Clicked ".concat(e,",").concat(a," "))}};return r.a.createElement("div",{className:"ack_form_root"},r.a.createElement(w,e),r.a.createElement("div",{className:"ack_form"},[l.P1,l.P2,l.P3].map((function(e,t){return"NON_RELEVANT"!==(c=a[e])&&"PROPOSED"!==c&&r.a.createElement(W,{key:t,onClick:n(e),player:e,disabled:"TBD"!==a[e]});var c}))))},W=function(e){var t=e.player,a=e.onClick,n=e.disabled;return r.a.createElement("div",{className:"single_ack"},r.a.createElement("p",{className:"question"},"".concat(t,", What do you think about the offer?")),r.a.createElement("div",{className:"answer"},r.a.createElement("span",null,"Looks good!"),r.a.createElement("button",{className:"accept",onClick:function(){return a("ACCEPT")},disabled:n},"Accept")),r.a.createElement("div",{className:"answer"},r.a.createElement("span",null,"No way!"),r.a.createElement("button",{className:"reject",onClick:function(){return a("REJECT")},disabled:n},"Reject")))},H=function(e){var t=e.offer;return r.a.createElement("li",null,r.a.createElement("span",null,"suggested by: ".concat(function(e){return"PROPOSED"==e[l.P1]?l.P1:"PROPOSED"==e[l.P2]?l.P2:"PROPOSED"==e[l.P3]?l.P3:"Initial"}(t))),r.a.createElement("span",null,"Values: P1: ".concat(t.split.P1,", P2: ").concat(t.split.P2,", P3: ").concat(t.split.P3)),r.a.createElement("span",null,"Rejected by: ".concat(function(e){return"REJECTED"==e[l.P1]?l.P1:"REJECTED"==e[l.P2]?l.P2:"REJECTED"==e[l.P3]?l.P3:void 0}(t))))},q=function(e){var t=e.offers;return r.a.createElement("ul",{className:"list_offers"},t.map((function(e){return r.a.createElement(H,{offer:e})})))},$=function(e){var t=h(e.offers);return r.a.createElement("div",null,"The game was finished and we have a coalition !!",E.map((function(e){return r.a.createElement("p",null,"".concat(e," gets "),r.a.createElement("span",{className:"finish_value"},"".concat(t.split[e])))})),r.a.createElement(q,e))},z={12:70,13:60,23:50,123:100},Q={P1:"NON_RELEVANT",P2:"ACCEPTED",P3:"ACCEPTED",actor:l.P2,selectedCoalition:"23",split:{P1:0,P2:25,P3:25}},X=Object(y.b)((function(e){return{screen:e.screen,coalitionsValues:e.coalitionsValues,players:e.players,currentTurn:e.currentTurn,coalitionForOffer:e.coalitionForOffer,offers:e.offers}}),(function(e){return{onUndo:function(){return e({type:u.UNDO,payload:{}})},onCoalitionSelect:function(t){return e(function(e){return{type:u.SELECT_COALITION,payload:{selectedCoalition:e}}}(t))},onGameRestart:function(){return e({type:u.RESTART_GAME,payload:{}})},onGameStart:function(){return e((t=z,a=Q,{type:u.START_GAME,payload:{gameCoalitionsValues:t,offer:a}}));var t,a},onOfferSubmit:function(t,a,n){return e(function(e,t,a){return{type:u.SUBMIT_OFFER,payload:{actor:a,selectedCoalition:t,split:e}}}(t,a,n))},onOfferRespond:function(t,a){return e((n=t,r=a,{type:u.RESPOND_OFFER,payload:{actor:n,status:r}}));var n,r},onGiveUp:function(){return e({type:u.GIVE_UP,payload:{}})}}}))((function(e){var t=e.onGameStart,a=e.screen,n=e.onCoalitionSelect,c=(e.coalitionForOffer,e.onUndo);return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{onStartGame:t,onIntroClick:e.onGameRestart,screen:a,onUndo:c}),r.a.createElement(D,{className:"app"},"INTRO"===a&&r.a.createElement(j,null),"SELECT_COAL"===a&&r.a.createElement(L,Object.assign({},e,{onCoalitionSelect:n})),"OFFER"===a&&r.a.createElement(B,e),"ACK"===a&&r.a.createElement(K,e),"FINISHED"===a&&r.a.createElement($,e)))})),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=Object(m.composeWithDevTools)({});return Object(s.createStore)(R,e,t(Object(s.applyMiddleware)(i.a,S())))}(localStorage["redux-store"]?JSON.parse(localStorage["redux-store"]):f);Y.subscribe((function(){return localStorage["redux-store"]=JSON.stringify(Y.getState())})),o.a.render(r.a.createElement(y.a,{store:Y},r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.79bba3ee.chunk.js.map